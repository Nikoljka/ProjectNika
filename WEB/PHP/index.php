<?php$orders = simplexml_load_file("orders.xml") -> order;$countSort = "";$priceSort = "";if (isset($_GET["count"])) {    $countSort = $_GET["count"];}else if (isset($_GET["price"])) {    $priceSort = $_GET["price"];}//Поиск по заказчикуfunction searchItemByCustomer($query){    global $orders;    $result = array();    foreach ($orders as $order){        if(substr(strtolower($order -> customer), 0, strlen($query)) == strtolower($query))            array_push($result, $order);    }    return $result;}//Сортировка по количествуfunction sortCount($a, $b){    global $countSort;    if ($countSort == "ASC")        return $a -> count - $b -> count;    else        return $b -> count - $a -> count;}//Сортировка по ценеfunction sortPrice($a, $b){    global $priceSort;    if ($priceSort == "ASC")        return $a -> price - $b -> price;    else        return $b -> price - $a -> price;}//Функция перевода объекта XML в массив, нужна для сортировкеfunction xmlToArray() {    global $orders;    $result = array();    foreach($orders as $node) {        $result[] = $node;    }    return $result;}?><!DOCTYPE html><html><head>    <title>Считывание XML для PHP</title>    <meta charset="utf-8" /></head><body>    <div>        <h1>XML Orders</h1>        <b>First order customer name:</b>        <b>            <?php                echo $orders[0] -> customer;            ?>        </b>        <br>        <b>Last order customer name:</b>        <b>            <?php            $var_Ps=$orders->xpath('/orders/order[last()]/customer')[0];            echo $var_Ps;            ?>        </b>        <br /><br />        <h4>Table</h4>        <table border="1">            <tr>                <th>Id</th>                <?php                    //Создаем ссылки в зависимости от текущей сортировки                    if ($countSort == "DESC") {                        echo '<th><a href="?count=ASC">Count</a></th>';                    }                    else {                        echo '<th><a href="?count=DESC">Count</a></th>';                    }                    if ($priceSort == "DESC") {                        echo '<th><a href="?price=ASC">Price</a></th>';                    }                    else {                        echo '<th><a href="?price=DESC">Price</a></th>';                    }                ?>                <th>Customer</th>                <th>Date</th>            </tr>            <?php            //Переводим ксамл объект в массив            $result = xmlToArray();            //Сортируем если указана одна из двух сортировок            if ($countSort != "") {                usort($result, "sortCount");            }            else if ($priceSort != "") {                usort($result, "sortPrice");            }            foreach($result as $order) {                echo '<tr>';                    echo '<td>'.($order -> id).'</td>';                    echo '<td>'.($order -> count).'</td>';                    echo '<td>'.($order -> price).'€</td>';                    echo '<td>'.($order -> customer).'</td>';                    echo '<td>'.($order -> date).'</td>';                echo '</tr>';            }            ?>        </table>        <div>            <h4>Search by customer name</h4>            <div>                <form action="?" method="post">                    <h3>                        <div>                            <input type="text" name="searchName" />                            <input type="submit" value="Find" />                        </div>                    </h3>                </form>                <table border="1">                    <tr>                        <th>Id</th>                        <th>Count</th>                        <th>Price</th>                        <th>Customer</th>                        <th>Date</th>                    </tr>                    <?php                        if(!empty($_POST['searchName'])) {                            $result = searchItemByCustomer($_POST['searchName']);                            foreach($result as $order) {                                echo '<tr>';                                echo '<td>'.($order -> id).'</td>';                                echo '<td>'.($order -> count).'</td>';                                echo '<td>'.($order -> price).'€</td>';                                echo '<td>'.($order -> customer).'</td>';                                echo '<td>'.($order -> date).'</td>';                                echo '</tr>';                            }                        }                    ?>                </table>            </div>        </div>    </div></body></html>